---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "altitude_mte_config Resource - altitude"
subcategory: ""
description: |-
  A resource which defines the various routes and other environment-specific config for a specific environment.
---

# altitude_mte_config (Resource)

A resource which defines the various routes and other environment-specific config for a specific environment.

## Example Usage

```terraform
resource "altitude_mte_config" "config" {
  config = {
    routes = [
      {
        host                 = "www.thgaltitude.com"
        path                 = "/test"
        enable_ssl           = true
        preserve_path_prefix = true
        shield_location      = "London"
      }
    ]
    cache = [
      {
        path_rules = {
          any_match = [
            "/foo**"
          ]
        }
        keys = {
          headers = ["X-Header"]
          cookies = ["X-Cookie"]
        }
        ttl_seconds = 100
      }
    ]
    conditional_headers = [
      {
        matching_header = "foo"
        pattern         = ".*pattern(.*)"
        new_header      = "bar"
        match_value     = "match"
        no_match_value  = "no match"
      }
    ]
  }
  environment_id = "test"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `config` (Attributes) (see [below for nested schema](#nestedatt--config))
- `environment_id` (String) The environment ID which this config associates with. If this value changes, this will replace this resource. **Note**, if this occurred on a production site, this would lead to downtime.

<a id="nestedatt--config"></a>
### Nested Schema for `config`

Required:

- `routes` (Attributes List) (see [below for nested schema](#nestedatt--config--routes))

Optional:

- `basic_auth` (Attributes) (see [below for nested schema](#nestedatt--config--basic_auth))
- `conditional_headers` (Attributes List) (see [below for nested schema](#nestedatt--config--conditional_headers))
- `cache` (Attributes List) A list of settings designed to manipulate your cache without requiring you to set response headers. (see [below for nested schema](#nestedatt--config--cache))

<a id="nestedatt--config--routes"></a>
### Nested Schema for `config.routes`

Required:

- `enable_ssl` (Boolean) A boolean specifying whether the host defined requires a secure connection.
- `host` (String) The downstream host MTE should direct to. This host should not contain the protocol or any slashes. A correct example would be docs.thgaltitude.com
- `path` (String) The path prefix this route will be hosted on.
- `preserve_path_prefix` (Boolean) A boolean specifying whether we should retain the path specified above when routing to the host. For example, if this was `true` and the path defined was `/foo`, when a client directs to `/foo/123` we would route to the host with the path set as `/foo/123`. If it was `false`, we would point to `/123`.

Optional:

- `append_path_prefix` (String) A string which will be appended to the start of the path sent to the host.
- `shield_location` (String) This describes the location which all requests will be forwarded to before reaching the origin of this route.


<a id="nestedatt--config--basic_auth"></a>
### Nested Schema for `config.basic_auth`

Required:

- `password` (String) The password which clients will enter to authorize viewing this environment.
- `username` (String) The username which clients will enter to authorize viewing this environment.


<a id="nestedatt--config--conditional_headers"></a>
### Nested Schema for `config.conditional_headers`

Required:

- `match_value` (String) The value of the new header created if a match was found. Capture groups are supported, but specifying a capture group thats out of bounds will return an empty string. eg $3 where there are only two capture groups will be replaced with ''
- `matching_header` (String) The header who's value will be checked for a match.
- `new_header` (String) The new header created to hold the match or no match values.
- `no_match_value` (String) The value of the new header created if no match was found.
- `pattern` (String) A regex pattern used to check the value of a given header for a match. The regex must cover the whole header value. Capture groups are supported
<a id="nestedatt--config--cache"></a>
### Nested Schema for `config.cache`

Optional:

- `keys` (Attributes) An object specifying header and cookie names which should be added to the cache key. The result of this would lead to separate cache hits for requests with different values of the header or cookie. One of this (see [below for nested schema](#nestedatt--config--cache--keys))
- `path_rules` (Attributes) A set of glob rules which identify when the cache settings should be activated. (see [below for nested schema](#nestedatt--config--cache--path_rules))
- `ttl_seconds` (Number) An integer that will be used to specify the time that the response of the route should be stored in the cache, in seconds.

<a id="nestedatt--config--cache--keys"></a>
### Nested Schema for `config.cache.keys`

Required:

- `cookies` (List of String) A list of cookie names which the cache key will differeniate upon the values of these cookies.
- `headers` (List of String) A list of header names of which the cache key will differeniate upon the values of these headers.


<a id="nestedatt--config--cache--path_rules"></a>
### Nested Schema for `config.cache.path_rules`

Required:

- `any_match` (List of String) A list of glob paths where one of the list needs to match for the cache settings to be activated for a path. If both this field and `none_match` are specified, both need to be successful for the path to match.
- `none_match` (List of String) A list of glob paths where all of the list needs to not match the path for the cache settings to be activated. If both this field and `any_match` are specified, both need to be successful for the path to match.
